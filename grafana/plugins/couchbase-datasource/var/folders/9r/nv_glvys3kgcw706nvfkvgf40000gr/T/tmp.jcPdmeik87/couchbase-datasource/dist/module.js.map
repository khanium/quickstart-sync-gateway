{"version":3,"file":"module.js","mappings":"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","sources":["webpack://couchbase-datasource/external amd \"@grafana/data\"","webpack://couchbase-datasource/external amd \"@grafana/runtime\"","webpack://couchbase-datasource/external amd \"@grafana/ui\"","webpack://couchbase-datasource/external amd \"lodash\"","webpack://couchbase-datasource/external amd \"react\"","webpack://couchbase-datasource/webpack/bootstrap","webpack://couchbase-datasource/webpack/runtime/compat get default export","webpack://couchbase-datasource/webpack/runtime/define property getters","webpack://couchbase-datasource/webpack/runtime/hasOwnProperty shorthand","webpack://couchbase-datasource/webpack/runtime/make namespace object","webpack://couchbase-datasource/./datasource.ts","webpack://couchbase-datasource/./ConfigEditor.tsx","webpack://couchbase-datasource/./types.ts","webpack://couchbase-datasource/./QueryEditor.tsx","webpack://couchbase-datasource/./module.ts"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__305__;","module.exports = __WEBPACK_EXTERNAL_MODULE__545__;","module.exports = __WEBPACK_EXTERNAL_MODULE__388__;","module.exports = __WEBPACK_EXTERNAL_MODULE__980__;","module.exports = __WEBPACK_EXTERNAL_MODULE__650__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { DataSourceInstanceSettings } from '@grafana/data';\nimport { DataSourceWithBackend } from '@grafana/runtime';\nimport { CouchbaseOptions, CouchbaseQuery } from './types';\n\nexport class Couchbase extends DataSourceWithBackend<CouchbaseQuery, CouchbaseOptions> {\n  annotations = {};\n  constructor(instanceSettings: DataSourceInstanceSettings<CouchbaseOptions>) {\n    super(instanceSettings);\n  }\n}\n","import React, { ChangeEvent, PureComponent } from 'react';\nimport { LegacyForms } from '@grafana/ui';\nimport { DataSourcePluginOptionsEditorProps } from '@grafana/data';\nimport { CouchbaseOptions, CouchbaseSecureData } from './types';\n\nconst { SecretFormField, FormField } = LegacyForms;\n\ninterface Props extends DataSourcePluginOptionsEditorProps<CouchbaseOptions> {}\n\ninterface State {}\n\nexport class ConfigEditor extends PureComponent<Props, State> {\n  onHostChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      jsonData: {\n        ...options.jsonData,\n        host: event.target.value,\n      },\n    });\n  };\n\n  onUserChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      jsonData: {\n        ...options.jsonData,\n        username: event.target.value,\n      },\n    });\n  };\n\n  // Secure field (only sent to the backend)\n  onPasswordChange = (event: ChangeEvent<HTMLInputElement>) => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonData: {\n        ...options.secureJsonData,\n        password: event.target.value,\n      },\n    });\n  };\n\n  onPasswordReset = () => {\n    const { onOptionsChange, options } = this.props;\n    onOptionsChange({\n      ...options,\n      secureJsonData: {\n        password: false,\n      },\n    });\n  };\n\n  render() {\n    const { options } = this.props;\n    const { jsonData, secureJsonFields } = options;\n    const secureJsonData = (options.secureJsonData || {}) as CouchbaseSecureData;\n\n    return (\n      <div className=\"gf-form-group\">\n        <div className=\"gf-form\">\n          <FormField\n            label=\"Cluster\"\n            labelWidth={10}\n            inputWidth={20}\n            onChange={this.onHostChange}\n            value={jsonData.host || ''}\n            placeholder=\"Couchbase cluster address\"\n          />\n        </div>\n        <div className=\"gf-form\">\n          <FormField\n            label=\"Username\"\n            labelWidth={10}\n            inputWidth={20}\n            onChange={this.onUserChange}\n            value={jsonData.username || ''}\n            placeholder=\"Couchbase cluster username\"\n          />\n        </div>\n        <div className=\"gf-form\">\n          <SecretFormField\n            isConfigured={(secureJsonFields && secureJsonFields.password) as boolean}\n            value={secureJsonData.password || ''}\n            label=\"Password\"\n            placeholder=\"Couchbase cluster password\"\n            labelWidth={10}\n            inputWidth={20}\n            onReset={this.onPasswordReset}\n            onChange={this.onPasswordChange}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import { DataQuery, DataSourceJsonData } from '@grafana/data';\n\nexport interface CouchbaseQuery extends DataQuery {\n  query: string;\n  analytics: boolean;\n}\n\nexport const defaultQuery: Partial<CouchbaseQuery> = {\n  query: '',\n  analytics: false,\n};\n\nexport interface SelectField {\n  label?: string;\n  expression: SqlExpression;\n}\n\nexport interface SqlExpression {}\n\n/**\n * These are options configured for each DataSource instance.\n */\nexport interface CouchbaseOptions extends DataSourceJsonData {\n  host?: string;\n  username?: string;\n  bucket?: string;\n}\n\n/**\n * Value that is used in the backend, but never sent over HTTP to the frontend\n */\nexport interface CouchbaseSecureData {\n  password?: string;\n}\n","import React, { PureComponent, FormEvent } from 'react';\nimport { FieldSet, InlineFieldRow, QueryField, InlineSwitch } from '@grafana/ui';\nimport { QueryEditorProps } from '@grafana/data';\nimport { Couchbase } from './datasource';\nimport { CouchbaseOptions, CouchbaseQuery, defaultQuery } from './types';\nimport { defaults } from 'lodash';\n\ntype Props = QueryEditorProps<Couchbase, CouchbaseQuery, CouchbaseOptions>;\n\nexport class QueryEditor extends PureComponent<Props> {\n  onQueryChange = (value: string) => {\n    this.props.onChange({\n      ...this.props.query,\n      query: value,\n    });\n  };\n\n  onAnalyticsChange = (e: FormEvent<HTMLInputElement>) => {\n    this.props.onChange({\n      ...this.props.query,\n      analytics: e.currentTarget.checked,\n    });\n  };\n\n  render() {\n    const query = defaults(this.props.query, defaultQuery);\n\n    return (\n      <FieldSet>\n        <InlineFieldRow>\n          <QueryField query={query.query} portalOrigin=\"couchbase\" onChange={this.onQueryChange} />\n        </InlineFieldRow>\n        <div style={{ display: 'flex', justifyContent: 'flex-end' }}>\n          <InlineSwitch\n            label=\"Run using analytics service\"\n            showLabel={true}\n            defaultChecked={query.analytics}\n            value={query.analytics}\n            onChange={this.onAnalyticsChange}\n          />\n        </div>\n      </FieldSet>\n    );\n  }\n}\n","import { DataSourcePlugin } from '@grafana/data';\nimport { Couchbase } from './datasource';\nimport { ConfigEditor } from './ConfigEditor';\nimport { QueryEditor } from './QueryEditor';\nimport { CouchbaseQuery, CouchbaseOptions } from './types';\n\nexport const plugin = new DataSourcePlugin<Couchbase, CouchbaseQuery, CouchbaseOptions>(Couchbase)\n  .setConfigEditor(ConfigEditor)\n  .setQueryEditor(QueryEditor);\n"],"names":["module","exports","__WEBPACK_EXTERNAL_MODULE__305__","__WEBPACK_EXTERNAL_MODULE__545__","__WEBPACK_EXTERNAL_MODULE__388__","__WEBPACK_EXTERNAL_MODULE__980__","__WEBPACK_EXTERNAL_MODULE__650__","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","Couchbase","DataSourceWithBackend","constructor","instanceSettings","super","annotations","SecretFormField","FormField","LegacyForms","ConfigEditor","PureComponent","render","options","this","props","jsonData","secureJsonFields","secureJsonData","div","className","label","labelWidth","inputWidth","onChange","onHostChange","host","placeholder","onUserChange","username","isConfigured","password","onReset","onPasswordReset","onPasswordChange","event","onOptionsChange","target","defaultQuery","query","analytics","QueryEditor","defaults","FieldSet","InlineFieldRow","QueryField","portalOrigin","onQueryChange","style","display","justifyContent","InlineSwitch","showLabel","defaultChecked","onAnalyticsChange","e","currentTarget","checked","plugin","DataSourcePlugin","setConfigEditor","setQueryEditor"],"sourceRoot":""}